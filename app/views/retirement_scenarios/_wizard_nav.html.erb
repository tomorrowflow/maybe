<%# locals: (current_step:) %>

<% steps = [
  { key: "basics", name: "Basics", step_number: 1 },
  { key: "income", name: "Income", step_number: 2 },
  { key: "portfolio", name: "Portfolio", step_number: 3 }
] %>

<% step_keys = steps.map { |s| s[:key] }
   current_index = step_keys.index(current_step) || 0 %>

<ul class="flex items-center gap-2">
  <% steps.each_with_index do |step, idx| %>
    <li class="flex items-center gap-2 group" data-retirement-wizard-target="nav" data-step-key="<%= step[:key] %>">
      <% is_current = step[:key] == current_step
         is_complete = idx < current_index %>

      <% text_class = if is_current
                  "text-primary"
                else
                  is_complete ? "text-green-600" : "text-secondary"
                end %>
      <% step_class = if is_current
                  "bg-primary text-primary"
                else
                  is_complete ? "bg-green-600/10 border-alpha-black-25" : "bg-container-inset"
                end %>

      <button type="button"
              class="flex items-center gap-3 cursor-pointer"
              data-action="click->retirement-wizard#goToStep"
              data-step="<%= step[:key] %>"
              data-step-index="<%= idx %>">
        <div class="flex items-center gap-2 text-sm font-medium <%= text_class %>" data-step-container>
          <span data-step-indicator class="<%= step_class %> w-7 h-7 rounded-full shrink-0 inline-flex items-center justify-center border border-transparent">
            <%= is_complete && !is_current ? icon("check", size: "sm") : step[:step_number] %>
          </span>
          <span data-step-text><%= step[:name] %></span>
        </div>
      </button>

      <hr class="border border-secondary w-12 group-last:hidden">
    </li>
  <% end %>
</ul>
